<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="ex.css" type="text/css" />
    </head>
    <body>
        <div id="head-content">
            <div id="file-choice">
                <input type="file" id="file"/></input>
                <button id="submit">submit</button>
            </div>
            
            
            <div id="image-effects">
                <div>
                    <button id="grayscalebtn">Gray Scale</button>
                </div>
                
                <div>
                    <button id="reset">Reset</button>
                </div>
            </div>    
        </div>
    
        <div id="img-area">
            <canvas id="canvas"></canvas>
        </div>
        
        <script type="text/javascript">
            var submit;
            var img = document.createElement("img");
            var input_file, file_name, file_type;
            var file_reader = new FileReader();
            
            var canvas, ctx, imageData;
            var data = [];
            window.addEventListener("load",function(){
                submit = document.getElementById("submit");
                submit.addEventListener("click",setImg);
            });
            
            function setImg() {
                input_file = document.getElementById("file").files[0];
                
                file_reader.addEventListener("load", function () {
                    img.src = file_reader.result;
                }, false);
                
                if (input_file) {
                    file_reader.readAsDataURL(input_file);
                    img.onload = function() {
                        drawImg(this);
                    };
                }
            }
            
            function drawImg(img) {
                canvas = document.getElementById('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                img.style.display = 'none';
                imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                data = imageData.data;
                alert(imageData.data[0]);
                data[0] = 1;
                alert(imageData.data[0]);
                //set_graphics_Btns();
                
            }
            /**
            function set_graphics_Btns() {
                /*var invertbtn = document.getElementById('invertbtn');
                invertbtn.addEventListener('click', invert);
                var grayscalebtn = document.getElementById('grayscalebtn');
                grayscalebtn.addEventListener('click', grayscale);
                /*var posterizenbtn = document.getElementById("posterizebtn");
                posterizenbtn.addEventListener("click", posterize);
                var resetbtn = document.getElementById("reset");
                resetbtn.addEventListener("click", resetImg);
            }
            
            function Brightness(red, grn, blu)
            {
                return ((0.2126 * red) + (0.7152 * grn) + (0.0722 * blu) + 0.5) ;
            }

            var grayscale = function() {
                alert("scaling");
                for (var i = 0; i < data.length; i += 4) {
                  var avg = Brightness(data[i], data[i + 1], data[i + 2]);/*(data[i] + data[i + 1] + data[i + 2]) / 3;
                  data[i]     = avg; // red
                  data[i + 1] = avg; // green
                  data[i + 2] = avg; // blue
                }
                ctx.putImageData(imageData, 0, 0);
            };
            
            var gaussFilter_Xarray = [];
            var kernal_radius = 5;
            var kernel = [kernal_radius];
            
            var Gaussian_Blur = class {
                
            };
            var Gaussian_Equation_Num = function(delta_x){
                var x = Math.pow(-delta_x,2)/2;
                return Math.exp(x);
            };
            
            var Gaussian_Equation_Denom = function(){
                var x = Math.PI * 2;
                return Math.sqrt(x);
            };
            
            var Gaussian_Equation = function(temp_kernel){
                
                var weight = 0;
                for(var i=0; i<=kernal_radius; i++){
                    weight = Gaussian_Equation_Num(i)/Gaussian_Equation_Denom;
                    temp_kernel[i] = weight;
                }
                return temp_kernel;
            };
            
            var Scale_Kernel = function(){
                
            };
        
            var resetImg = function(){
                alert("reseting");
                ctx.drawImage(img, 0, 0);
                //ctx.putImageData(imageData, 0, 0);
            };**/
        </script>
    </body>
</html>